from ObjectData import ObjectData

FONT_DICT = {
    '0': [0x3e, 0x63, 0x41, 0x4d, 0x4d, 0x61, 0x3f],
    '1': [0x07, 0x7d, 0x41, 0x7f, 0x00, 0x00, 0x00],
    '2': [0x7f, 0x4d, 0x55, 0x55, 0x5b, 0x7e, 0x00],
    '3': [0x7f, 0x55, 0x55, 0x55, 0x69, 0x3f, 0x00],
    '4': [0x1f, 0x31, 0x6f, 0x6f, 0x41, 0x6f, 0x38],
    '5': [0x7f, 0x51, 0x55, 0x55, 0x6d, 0x3f, 0x00],
    '6': [0x7e, 0x43, 0x45, 0x55, 0x55, 0x6d, 0x3f],
    '7': [0x0f, 0x09, 0x7d, 0x5d, 0x6d, 0x31, 0x1f],
    '8': [0x3e, 0x2a, 0x55, 0x55, 0x55, 0x69, 0x3f],
    '9': [0x0e, 0x7b, 0x51, 0x55, 0x55, 0x61, 0x3f],
    ':': [0x7e, 0x42, 0x7e, 0x00, 0x00, 0x00, 0x00],
    'A': [0x7e, 0x43, 0x6d, 0x2d, 0x6d, 0x41, 0x7f],
    'B': [0x7e, 0x43, 0x41, 0x45, 0x51, 0x6f, 0x38],
    'C': [0x3e, 0x63, 0x5d, 0x55, 0x55, 0x77, 0x00],
    'D': [0x7e, 0x43, 0x4d, 0x4d, 0x5d, 0x61, 0x3f],
    'E': [0x7e, 0x43, 0x55, 0x55, 0x55, 0x7f, 0x00],
    'F': [0x7e, 0x43, 0x6d, 0x2d, 0x2d, 0x3f, 0x00],
    'G': [0x7e, 0x43, 0x4d, 0x4d, 0x55, 0x65, 0x3f],
    'H': [0x7f, 0x41, 0x77, 0x77, 0x41, 0x7f, 0x00],
    'I': [0x77, 0x55, 0x41, 0x5d, 0x75, 0x00, 0x00],
    'J': [0x78, 0x41, 0x4d, 0x5d, 0x61, 0x3f, 0x00],
    'K': [0x7f, 0x41, 0x77, 0x73, 0x4d, 0x7f, 0x00],
    'L': [0x7f, 0x41, 0x5f, 0x50, 0x50, 0x70, 0x00],
    'M': [0x7e, 0x43, 0x7d, 0x7d, 0x41, 0x7d, 0x7d],
    'N': [0x7f, 0x43, 0x7d, 0x05, 0x7d, 0x41, 0x7f],
    'O': [0x3e, 0x63, 0x5d, 0x5d, 0x5d, 0x61, 0x3f],
    'P': [0x7e, 0x43, 0x6d, 0x2d, 0x2d, 0x31, 0x1f],
    'Q': [0x3e, 0x63, 0x5d, 0xdd, 0x9d, 0xe1, 0x3f],
    'R': [0x7e, 0x43, 0x6d, 0x6d, 0x4d, 0x71, 0x1f],
    'S': [0x7e, 0x5b, 0x55, 0x55, 0x6d, 0x3f, 0x00],
    'T': [0x07, 0x05, 0x7d, 0x41, 0x7d, 0x05, 0x07],
    'U': [0x3f, 0x61, 0x5f, 0x50, 0x5f, 0x61, 0x3f],
    'V': [0x1f, 0x31, 0x6f, 0x58, 0x68, 0x31, 0x1f],
    'W': [0x7f, 0x41, 0x5f, 0x5f, 0x61, 0x41, 0x5f],
    'X': [0x7f, 0x49, 0x77, 0x77, 0x49, 0x7f, 0x00],
    'Y': [0x7f, 0x59, 0x57, 0x57, 0x61, 0x3f, 0x00],
    'Z': [0x7f, 0x4d, 0x55, 0x55, 0x59, 0x7f, 0x00],
    ' ': [0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00]
}


def convert_to_bin_data(font_data: list) -> list:
    img_bin_data = []
    
    for i in range(0, 8):
        img_bin_data.append([])
    
    for byte_data in font_data:
        for i in range(0, 8):
            img_bin_data[i].append((byte_data & (1 << i)) >> i)
    
    return img_bin_data


def to_image_data(string: str) -> list:
    img_data = [[], [], [], [], [], [], [], []]
    
    for c in string:
        font_bin_data = FONT_DICT[c]
        
        for index, row in enumerate(font_bin_data):
            img_data[index] = img_data[index] + row
    
    return img_data


class StringData(ObjectData):
    
    def __init__(self, string: str):
        super(StringData, self).__init__(to_image_data(string))
    
    def set_string(self, string: str):
        self.img_bin_data = to_image_data(string)


for key, value in FONT_DICT.items():
    FONT_DICT[key] = convert_to_bin_data(value)
